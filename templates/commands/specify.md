---
description: 自然言語による機能説明から機能仕様を作成または更新します。
scripts:
  sh: scripts/bash/create-new-feature.sh --json "{ARGS}"
  ps: scripts/powershell/create-new-feature.ps1 -Json "{ARGS}"
---

ユーザーの入力は、エージェントから直接提供される場合とコマンド引数として提供される場合があります。プロンプトを実行する前に、必ずこれを考慮してください（空でない場合）。

ユーザー入力：

$ARGUMENTS

ユーザーがトリガーメッセージで `/specify` の後に入力したテキストが機能説明です。`{ARGS}` が以下に文字通り表示されていても、この会話で常に利用可能であると仮定してください。空のコマンドが提供された場合を除き、ユーザーに繰り返しを求めないでください。

その機能説明に基づいて、以下を実行してください：

1. リポジトリルートから `{SCRIPT}` スクリプトを実行し、そのJSON出力からBRANCH_NAMEとSPEC_FILEを解析してください。すべてのファイルパスは絶対パスである必要があります。
  **重要** このスクリプトは一度だけ実行してください。JSONはターミナル出力として提供されます。必要なコンテンツを取得するために、常にこれを参照してください。
2. `templates/spec-template.md` を読み込んで、必要なセクションを理解してください。
3. テンプレート構造を使用してSPEC_FILEに仕様を書き込み、セクションの順序と見出しを保持しながら、機能説明（引数）から導出した具体的な詳細でプレースホルダーを置き換えてください。
4. ブランチ名、仕様ファイルパス、次のフェーズへの準備完了を報告してください。

注意：スクリプトは書き込み前に新しいブランチを作成・チェックアウトし、仕様ファイルを初期化します。
